<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" data-diagram-type="SEQUENCE" height="1082px" preserveAspectRatio="none" style="width:1269px;height:1082px;background:#FFFFFF;" version="1.1" viewBox="0 0 1269 1082" width="1269px" zoomAndPan="magnify"><title>Mattermost LLM Summary Plugin - Data Flow</title><defs/><g><text fill="#000000" font-family="Verdana" font-size="22" font-weight="bold" lengthAdjust="spacing" textLength="559.0127" x="358.9661" y="37.1182">Mattermost LLM Summary Plugin - Data Flow</text><rect fill="#FFFFFF" height="178.3652" style="stroke:#000000;stroke-width:1;" width="532.6714" x="341.0059" y="699.7529"/><rect fill="#FFFFFF" height="87.9673" style="stroke:none;stroke-width:1;" width="532.6714" x="341.0059" y="790.1509"/><g><title>User</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="24.9277" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="28" x2="28" y1="132.7666" y2="986.3154"/></g><g><title>Mattermost Server</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="231.5688" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="234.626" x2="234.626" y1="132.7666" y2="986.3154"/></g><g><title>Plugin</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="385.2896" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="389.0059" x2="389.0059" y1="132.7666" y2="986.3154"/></g><g><title>Configuration</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="532.0215" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="535.7339" x2="535.7339" y1="132.7666" y2="986.3154"/></g><g><title>Summary Handler</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="687.2695" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="690.3091" x2="690.3091" y1="132.7666" y2="986.3154"/></g><g><title>LLM Provider</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="888.3691" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="892.1768" x2="892.1768" y1="132.7666" y2="986.3154"/></g><g><title>Ollama API</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="1079.4268" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="1082.4448" x2="1082.4448" y1="132.7666" y2="986.3154"/></g><g><title>Thread.Channel</title><rect fill="#000000" fill-opacity="0.00000" height="853.5488" width="8" x="1204.5249" y="132.7666"/><line style="stroke:#000000;stroke-width:1;" x1="1208.4087" x2="1208.4087" y1="132.7666" y2="986.3154"/></g><g class="participant participant-head" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="129.8271">User</text><ellipse cx="28.9277" cy="63.752" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,71.752 L28.9277,98.752 M15.9277,79.752 L41.9277,79.752 M28.9277,98.752 L15.9277,113.752 M28.9277,98.752 L41.9277,113.752" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="User"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="31.8555" x="10" y="999.3906">User</text><ellipse cx="28.9277" cy="1011.3301" fill="#FFFFFF" rx="8" ry="8" style="stroke:#000000;stroke-width:1;"/><path d="M28.9277,1019.3301 L28.9277,1046.3301 M15.9277,1027.3301 L41.9277,1027.3301 M28.9277,1046.3301 L15.9277,1061.3301 M28.9277,1046.3301 L41.9277,1061.3301" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-head" data-participant="MM"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.8857" x="162.626" y="100.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.8857" x="169.626" y="121.8271">Mattermost Server</text></g><g class="participant participant-tail" data-participant="MM"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="145.8857" x="162.626" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="131.8857" x="169.626" y="1006.3906">Mattermost Server</text></g><g class="participant participant-head" data-participant="Plugin"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="56.5674" x="361.0059" y="100.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="42.5674" x="368.0059" y="121.8271">Plugin</text></g><g class="participant participant-tail" data-participant="Plugin"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="56.5674" x="361.0059" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="42.5674" x="368.0059" y="1006.3906">Plugin</text></g><g class="participant participant-head" data-participant="Config"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.5752" x="481.7339" y="100.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.5752" x="488.7339" y="121.8271">Configuration</text></g><g class="participant participant-tail" data-participant="Config"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="108.5752" x="481.7339" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="94.5752" x="488.7339" y="1006.3906">Configuration</text></g><g class="participant participant-head" data-participant="Handler"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="141.9209" x="620.3091" y="100.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="127.9209" x="627.3091" y="121.8271">Summary Handler</text></g><g class="participant participant-tail" data-participant="Handler"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="141.9209" x="620.3091" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="127.9209" x="627.3091" y="1006.3906">Summary Handler</text></g><g class="participant participant-head" data-participant="LLM"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.3848" x="840.1768" y="83.7373"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.3848" x="847.1768" y="104.8125">LLM Provider</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61.8516" x="861.4434" y="121.8271">(Ollama)</text></g><g class="participant participant-tail" data-participant="LLM"><rect fill="#FFFFFF" height="48.0293" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="104.3848" x="840.1768" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="90.3848" x="847.1768" y="1006.3906">LLM Provider</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="61.8516" x="861.4434" y="1023.4053">(Ollama)</text></g><g class="participant participant-head" data-participant="API"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="91.9639" x="1037.4448" y="100.752"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.9639" x="1044.4448" y="121.8271">Ollama API</text></g><g class="participant participant-tail" data-participant="API"><rect fill="#FFFFFF" height="31.0146" rx="2.5" ry="2.5" style="stroke:#000000;stroke-width:1;" width="91.9639" x="1037.4448" y="985.3154"/><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="77.9639" x="1044.4448" y="1006.3906">Ollama API</text></g><g class="participant participant-head" data-participant="Messages"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.2324" x="1149.4087" y="112.8125">Thread/Channel</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.4912" x="1171.7793" y="129.8271">Messages</text><path d="M1190.5249,62.7373 C1190.5249,52.7373 1208.5249,52.7373 1208.5249,52.7373 C1208.5249,52.7373 1226.5249,52.7373 1226.5249,62.7373 L1226.5249,88.7373 C1226.5249,98.7373 1208.5249,98.7373 1208.5249,98.7373 C1208.5249,98.7373 1190.5249,98.7373 1190.5249,88.7373 L1190.5249,62.7373" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1190.5249,62.7373 C1190.5249,72.7373 1208.5249,72.7373 1208.5249,72.7373 C1208.5249,72.7373 1226.5249,72.7373 1226.5249,62.7373" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="participant participant-tail" data-participant="Messages"><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="112.2324" x="1149.4087" y="999.3906">Thread/Channel</text><text fill="#000000" font-family="Verdana" font-size="14" lengthAdjust="spacing" textLength="67.4912" x="1171.7793" y="1016.4053">Messages</text><path d="M1190.5249,1029.3447 C1190.5249,1019.3447 1208.5249,1019.3447 1208.5249,1019.3447 C1208.5249,1019.3447 1226.5249,1019.3447 1226.5249,1029.3447 L1226.5249,1055.3447 C1226.5249,1065.3447 1208.5249,1065.3447 1208.5249,1065.3447 C1208.5249,1065.3447 1190.5249,1065.3447 1190.5249,1055.3447 L1190.5249,1029.3447" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1190.5249,1029.3447 C1190.5249,1039.3447 1208.5249,1039.3447 1208.5249,1039.3447 C1208.5249,1039.3447 1226.5249,1039.3447 1226.5249,1029.3447" fill="none" style="stroke:#000000;stroke-width:1;"/></g><g class="message" data-participant-1="User" data-participant-2="MM"><polygon fill="#000000" points="223.5688,160.5659,233.5688,164.5659,223.5688,168.5659,227.5688,164.5659" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="28.9277" x2="229.5688" y1="164.5659" y2="164.5659"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="182.6411" x="35.9277" y="159.8364">/summary [thread|channel]</text></g><g class="message" data-participant-1="MM" data-participant-2="Plugin"><polygon fill="#000000" points="377.2896,190.3652,387.2896,194.3652,377.2896,198.3652,381.2896,194.3652" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="235.5688" x2="383.2896" y1="194.3652" y2="194.3652"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.7207" x="242.5688" y="189.6357">ExecuteCommand()</text></g><g class="message" data-participant-1="Plugin" data-participant-2="Config"><polygon fill="#000000" points="524.0215,220.1646,534.0215,224.1646,524.0215,228.1646,528.0215,224.1646" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="389.2896" x2="530.0215" y1="224.1646" y2="224.1646"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.5928" x="396.2896" y="219.4351">getConfiguration()</text></g><g class="message" data-participant-1="Config" data-participant-2="Plugin"><polygon fill="#000000" points="400.2896,265.7632,390.2896,269.7632,400.2896,273.7632,396.2896,269.7632" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="394.2896" x2="535.0215" y1="269.7632" y2="269.7632"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="81.4277" x="406.2896" y="249.2344">LLM settings</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="122.7319" x="406.2896" y="265.0337">(host, model, etc.)</text></g><g class="message" data-participant-1="Plugin" data-participant-2="Handler"><polygon fill="#000000" points="679.2695,295.5625,689.2695,299.5625,679.2695,303.5625,683.2695,299.5625" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="389.2896" x2="685.2695" y1="299.5625" y2="299.5625"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="85.249" x="396.2896" y="294.833">Handle(args)</text></g><g class="message" data-participant-1="Handler" data-participant-2="MM"><polygon fill="#000000" points="246.5688,325.3618,236.5688,329.3618,246.5688,333.3618,242.5688,329.3618" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="240.5688" x2="690.2695" y1="329.3618" y2="329.3618"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="200.9922" x="252.5688" y="324.6323">Get posts from thread/channel</text></g><g class="message" data-participant-1="MM" data-participant-2="Messages"><polygon fill="#000000" points="1196.5249,355.1611,1206.5249,359.1611,1196.5249,363.1611,1200.5249,359.1611" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="235.5688" x2="1202.5249" y1="359.1611" y2="359.1611"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="104.2666" x="242.5688" y="354.4316">Fetch messages</text></g><g class="message" data-participant-1="Messages" data-participant-2="MM"><polygon fill="#000000" points="246.5688,384.9604,236.5688,388.9604,246.5688,392.9604,242.5688,388.9604" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="240.5688" x2="1207.5249" y1="388.9604" y2="388.9604"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="51.2256" x="252.5688" y="384.231">Post list</text></g><g class="message" data-participant-1="MM" data-participant-2="Handler"><polygon fill="#000000" points="679.2695,414.7598,689.2695,418.7598,679.2695,422.7598,683.2695,418.7598" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="235.5688" x2="685.2695" y1="418.7598" y2="418.7598"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="50.3242" x="242.5688" y="414.0303">PostList</text></g><g class="message" data-participant-1="Handler" data-participant-2="Handler"><line style="stroke:#000000;stroke-width:1;" x1="691.2695" x2="733.2695" y1="452.9587" y2="452.9587"/><line style="stroke:#000000;stroke-width:1;" x1="733.2695" x2="733.2695" y1="452.9587" y2="465.9587"/><line style="stroke:#000000;stroke-width:1;" x1="692.2695" x2="733.2695" y1="465.9587" y2="465.9587"/><polygon fill="#000000" points="702.2695,461.9587,692.2695,465.9587,702.2695,469.9587,698.2695,465.9587" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="164.1187" x="698.2695" y="448.2292">Filter &amp; format messages</text></g><path d="M874.1187,431.7598 L874.1187,472.7598 L1074.1187,472.7598 L1074.1187,441.7598 L1064.1187,431.7598 L874.1187,431.7598" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1064.1187,431.7598 L1064.1187,441.7598 L1074.1187,441.7598 L1064.1187,431.7598" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="144.6758" x="880.1187" y="449.8296">Remove deleted posts</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="179.2007" x="880.1187" y="465.6289">Format user:message pairs</text><g class="message" data-participant-1="Handler" data-participant-2="Handler"><line style="stroke:#000000;stroke-width:1;" x1="691.2695" x2="733.2695" y1="504.5574" y2="504.5574"/><line style="stroke:#000000;stroke-width:1;" x1="733.2695" x2="733.2695" y1="504.5574" y2="517.5574"/><line style="stroke:#000000;stroke-width:1;" x1="692.2695" x2="733.2695" y1="517.5574" y2="517.5574"/><polygon fill="#000000" points="702.2695,513.5574,692.2695,517.5574,702.2695,521.5574,698.2695,517.5574" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="166.772" x="698.2695" y="499.8279">Create structured prompt</text></g><path d="M876.772,483.3584 L876.772,524.3584 L1065.772,524.3584 L1065.772,493.3584 L1055.772,483.3584 L876.772,483.3584" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1055.772,483.3584 L1055.772,493.3584 L1065.772,493.3584 L1055.772,483.3584" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="139.3311" x="882.772" y="501.4282">Build Russian prompt</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="168.5303" x="882.772" y="517.2275">with conversation context</text><g class="message" data-participant-1="Handler" data-participant-2="LLM"><polygon fill="#000000" points="880.3691,547.7563,890.3691,551.7563,880.3691,555.7563,884.3691,551.7563" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="691.2695" x2="886.3691" y1="551.7563" y2="551.7563"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="177.0996" x="698.2695" y="547.0269">Generate(context, prompt)</text></g><g class="message" data-participant-1="LLM" data-participant-2="API"><polygon fill="#000000" points="1071.4268,588.4553,1081.4268,592.4553,1071.4268,596.4553,1075.4268,592.4553" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;" x1="892.3691" x2="1077.4268" y1="592.4553" y2="592.4553"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="167.0576" x="899.3691" y="587.7258">HTTP POST /api/generate</text></g><path d="M1088,564.7563 L1088,605.7563 L1262,605.7563 L1262,574.7563 L1252,564.7563 L1088,564.7563" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1252,564.7563 L1252,574.7563 L1262,574.7563 L1252,564.7563" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="120.707" x="1094" y="582.8262">JSON request with</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="153.5181" x="1094" y="598.6255">model, prompt, options</text><g class="message" data-participant-1="API" data-participant-2="LLM"><polygon fill="#000000" points="903.3691,640.054,893.3691,644.054,903.3691,648.054,899.3691,644.054" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="897.3691" x2="1082.4268" y1="644.054" y2="644.054"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="131.0156" x="909.3691" y="639.3245">Streaming response</text></g><path d="M1088,616.355 L1088,657.355 L1243,657.355 L1243,626.355 L1233,616.355 L1088,616.355" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><path d="M1233,616.355 L1233,626.355 L1243,626.355 L1233,616.355" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="134.0244" x="1094" y="634.4248">Generated summary</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="66.7773" x="1094" y="650.2241">in Russian</text><g class="message" data-participant-1="LLM" data-participant-2="Handler"><polygon fill="#000000" points="702.2695,680.7529,692.2695,684.7529,702.2695,688.7529,698.2695,684.7529" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="696.2695" x2="891.3691" y1="684.7529" y2="684.7529"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="93.7041" x="708.2695" y="680.0234">Summary text</text></g><path d="M341.0059,699.7529 L405.0552,699.7529 L405.0552,707.5522 L395.0552,717.5522 L341.0059,717.5522 L341.0059,699.7529" fill="#FFFFFF" style="stroke:#000000;stroke-width:1;"/><rect fill="none" height="178.3652" style="stroke:#000000;stroke-width:1;" width="532.6714" x="341.0059" y="699.7529"/><text fill="#000000" font-family="Verdana" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="19.0493" x="356.0059" y="713.8228">alt</text><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89.1118" x="420.0552" y="712.812">[LLM Success]</text><g class="message" data-participant-1="Handler" data-participant-2="Handler"><line style="stroke:#000000;stroke-width:1;" x1="691.2695" x2="733.2695" y1="739.3516" y2="739.3516"/><line style="stroke:#000000;stroke-width:1;" x1="733.2695" x2="733.2695" y1="739.3516" y2="752.3516"/><line style="stroke:#000000;stroke-width:1;" x1="692.2695" x2="733.2695" y1="752.3516" y2="752.3516"/><polygon fill="#000000" points="702.2695,748.3516,692.2695,752.3516,702.2695,756.3516,698.2695,752.3516" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="109.8525" x="698.2695" y="734.6221">Format response</text></g><g class="message" data-participant-1="Handler" data-participant-2="Plugin"><polygon fill="#000000" points="400.2896,778.1509,390.2896,782.1509,400.2896,786.1509,396.2896,782.1509" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="394.2896" x2="690.2695" y1="782.1509" y2="782.1509"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="133.3579" x="406.2896" y="777.4214">Formatted summary</text></g><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="341.0059" x2="873.6772" y1="791.1509" y2="791.1509"/><text fill="#000000" font-family="Verdana" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="71.6289" x="346.0059" y="802.21">[LLM Error]</text><g class="message" data-participant-1="Handler" data-participant-2="Handler"><line style="stroke:#000000;stroke-width:1;" x1="691.2695" x2="733.2695" y1="827.3188" y2="827.3188"/><line style="stroke:#000000;stroke-width:1;" x1="733.2695" x2="733.2695" y1="827.3188" y2="840.3188"/><line style="stroke:#000000;stroke-width:1;" x1="692.2695" x2="733.2695" y1="840.3188" y2="840.3188"/><polygon fill="#000000" points="702.2695,836.3188,692.2695,840.3188,702.2695,844.3188,698.2695,840.3188" style="stroke:#000000;stroke-width:1;"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="163.4077" x="698.2695" y="822.5894">Create fallback summary</text></g><g class="message" data-participant-1="Handler" data-participant-2="Plugin"><polygon fill="#000000" points="400.2896,866.1182,390.2896,870.1182,400.2896,874.1182,396.2896,870.1182" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="394.2896" x2="690.2695" y1="870.1182" y2="870.1182"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="206.686" x="406.2896" y="865.3887">Fallback with original messages</text></g><g class="message" data-participant-1="Plugin" data-participant-2="MM"><polygon fill="#000000" points="246.5688,918.7168,236.5688,922.7168,246.5688,926.7168,242.5688,922.7168" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="240.5688" x2="388.2896" y1="922.7168" y2="922.7168"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="128.6797" x="252.5688" y="902.188">CommandResponse</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="80.9326" x="252.5688" y="917.9873">(ephemeral)</text></g><g class="message" data-participant-1="MM" data-participant-2="User"><polygon fill="#000000" points="39.9277,964.3154,29.9277,968.3154,39.9277,972.3154,35.9277,968.3154" style="stroke:#000000;stroke-width:1;"/><line style="stroke:#000000;stroke-width:1;stroke-dasharray:2,2;" x1="33.9277" x2="234.5688" y1="968.3154" y2="968.3154"/><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="129.4731" x="45.9277" y="947.7866">Summary displayed</text><text fill="#000000" font-family="Verdana" font-size="13" lengthAdjust="spacing" textLength="89.6289" x="45.9277" y="963.5859">(only to user)</text></g><!--SRC=[TLHDRzim3BthLt0z30cGBlSS2cnPim_KQz1afsK7rcOSORBaING_WFtuKPRSs41xyWSV7zyZARtZ4pK4hK5j5Mis10KoaszSOBYvAM3NDGtwPzYQhjOMBk4pCiB6k4Ubi6JduMSWhrhqh4lTecMu657io3-Glm0CK1HJL6BiG-br6buxUzHrvv6rIwZqPueQv7r5MvbSABzFWT7Brhi7NP4_sDcjCTZWlCTBQ8fDGVYu_TR7vQagSNsFWU1YV_A4rN9zGcl976n18M1D8NdC7qh5hi3bbRXUmJ9abR-uJ_vNfkJVgYWY9jbVmVKJbHtJsWdQLhEvKaFNhxBv5TJ4ayu8Adt3vOWfkWt4h6qTnEr9Hh60nbLa5a1SVfXGvtwjyiiCVHtcAlyTF7mXXbPe0XozQo0PMMOZsSVWVWKRANA2PkZ64EWrHhPjt0sZ0_UPOmqnSXC3Om4lqOqsibdm7exEDyZd2jOnWTVrYLTmHurx812pn5GbrGUxIHcTp6MLqw15xSFhbTRYJoW3-wxapaSUyTtofDAdJfiAxheGDDeCEDX7pISedPN53_sCuWVJqzIJZ2XsrPBCaMOPiSWaSnKdA2ZPFPdBVh-5xUrk3qjizRBEIHCfttUtFy3Jtuwair71mUPv9yO5k3Pg4Rl2sVUyLx1ZCTh8daXoQ2K-fHq4Lf1t-61bQR9ZbLIEspQSnsGNpN29bAMqN06yEjGqcPVw8zHefHDgf4IHaVCOwQ-zT_uDyZp78nfpZ-MVb-GtYWomVePEcg0jclEQaQtE9oVlSZwkTrc-73TguwtgqSo7zOwtmRavbGvoupvJ9LXdZNJBzNivL_y1]--></g></svg>